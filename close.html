<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>Welcome to nginx!</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#fff" />
  </head>
  <body>
    <h1>
      Close test
      <span
        >v:<span id="version"></span>
        <script>
          document.querySelector("#version").innerHTML = Date.now();
        </script></span
      >
      <button id="refresh">Refresh</button>
      <script>
        document.getElementById("refresh").addEventListener("click", () => {
          location.reload();
        });
      </script>
    </h1>
    <a id="openInWeverse" href="#">이 페이지 위버스 인앱으로 열기</a>
    <script>
      document.getElementById("openInWeverse").href =
        "weverse://web?url=" + encodeURIComponent(location.href);
    </script>

    <section>
      <h2>닫기 </h2>
      <ol>
        <li>
          <a href="https://weverse.io/__close__"
            >https://weverse.io/__close__</a
          >
        </li>
        <li>
          <a href="./__close__"
            >__close__</a
          >
        </li>
        <li>
          <a href="weverse://close"
            >weverse://close</a
          >
        </li>
        <li>
          <a href="weverse://more"
            >더보기</a
          >
        </li>
        <li>
          <button id="pta">And set Page title</button>
          <textarea id="ptar"></textarea>
          <script>
            document.getElementById('pta').addEventListener('click', () => {
              try {
                PageInfo.onInfoChanged(JSON.stringfy({title: 'title changed:' + Date.now()}));
              } catch (e) {
                document.getElementById('ptar').innerHTML = e;
              }
            });
          </script>
        </li>
        <li>
          <button id="pti">iOS set Page title</button>
          <textarea id="ptir"></textarea>
          <script>
            document.getElementById('pti').addEventListener('click', () => {
              try {
                window.webkit.messageHandlers.onListAppbar.postMessage(JSON.stringfy({title: 'title changed:' + Date.now()}));

              } catch (e) {
                document.getElementById('ptir').innerHTML = e;
              }
            });
          </script>
        </li>
      </ol>
    </section>
  </body>
</html>
